<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.4.0 -->
<title>SDL Mapping | xpadneo</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="SDL Mapping" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Advanced Linux Driver for Xbox One S Wireless Controller" />
<meta property="og:description" content="Advanced Linux Driver for Xbox One S Wireless Controller" />
<link rel="canonical" href="http://localhost:4000/SDL.html" />
<meta property="og:url" content="http://localhost:4000/SDL.html" />
<meta property="og:site_name" content="xpadneo" />
<script type="application/ld+json">
{"description":"Advanced Linux Driver for Xbox One S Wireless Controller","@type":"WebPage","url":"http://localhost:4000/SDL.html","headline":"SDL Mapping","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <link rel="stylesheet" href="/assets/css/style.css?v=5f454a7ab21ca11d3cf8120b0f04c78965202498">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">xpadneo</h1>
      <h2 class="project-tagline">Advanced Linux Driver for Xbox One S Wireless Controller</h2>
      
        <a href="http://github.com/atar-axis/xpadneo" class="btn">View on GitHub</a>
      
      
    </section>

    <section class="main-content">
      <h2 id="sdl-mapping">SDL Mapping</h2>

<p>Since after libSDL2 2.0.8, SDL contains a fix for the wrong mapping introduced
by the generic hid driver. Thus, you may experience wrong button mappings
again despite using xpadneo as the driver.</p>

<p>Also, Wine since version 3.3 supports using SDL for <code class="highlighter-rouge">xinput*.dll</code>, and with
version 3.4 it includes a patch to detect the Xbox One S controller. Games
running in Wine and using xinput may thus also see wrong mappings.</p>

<p>The Steam client includes a correction for SDL based games since some
version, not depending on the SDL version. It provides a custom SDL
mapping the same way we are describing here.</p>

<p>To fix this and have both SDL-based software and software using the legacy
joystick interface using correct button mapping, you need to export an
environment variable which then overrides default behavior:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export SDL_GAMECONTROLLERCONFIG="\
  050000005e040000fd02000003090000,Xbox One Wireless Controller,\
  a:b0,b:b1,back:b6,dpdown:h0.4,dpleft:h0.8,dpright:h0.2,dpup:h0.1,\
  guide:b8,leftshoulder:b4,leftstick:b9,lefttrigger:a2,leftx:a0,lefty:a1,\
  rightshoulder:b5,rightstick:b10,righttrigger:a5,rightx:a3,righty:a4,\
  start:b7,x:b2,y:b3,"
</code></pre></div></div>

<p>You need to set this before starting the software. To apply it globally,
put this line into your logon scripts.</p>

<p>The id <code class="highlighter-rouge">050000005e040000fd02000003090000</code> is crafted from your device
id as four 32-bit words. It is, in LSB order, the bus number 5, the
vendor id <code class="highlighter-rouge">045e</code>, the device id <code class="highlighter-rouge">02fd</code>, and the interface version
or serial <code class="highlighter-rouge">0903</code> which is not a running number but firmware dependent.
This version number is not the same as shown in dmesg as the fourth
component.</p>

<p>You can find the values by looking at dmesg when <code class="highlighter-rouge">xpadneo</code> detects
your device. In dmesg, find the device path, then change to the
device path below <code class="highlighter-rouge">/sys</code> and look for the files in the <code class="highlighter-rouge">id</code> directory.</p>

<p>The name value after the id is purely cosmetical, you can name it
whatever you like. It may show up in games as a visual identifier.</p>

<p>If running Wine games, to properly support xpadneo, ensure you have
removed any previous xinput hacks (which includes redirecting
<code class="highlighter-rouge">xinput*.dll</code> to native and placing a hacked xinput dll in the
game directory. Also ensure your Wine built comes with SDL support
compiled in.</p>

<p>If you do not want to apply this setting globally, you can instead
put the SDL mapping inside Steam <code class="highlighter-rouge">config.vdf</code>. You can find this
file in <code class="highlighter-rouge">$STEAM_BASE/config/config.vdf</code>. Find the line containing
<code class="highlighter-rouge">"SDL_GamepadBind"</code> and adjust or add your own controller (see
above). Ensure correct quoting, and Steam is not running
while editing the file. This may not work for Steam in Wine
because the Wine SDL layer comes first, you still need to export
the variable before running Wine. An example with multiple
controllers looks like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        "SDL_GamepadBind"               "030000006d0400001fc2000005030000,Logitech F710 Gamepad (XInput),a:b0,b:b1,back:b6,dpdown:h0.4,dpleft:h0.8,dpright:h0.2,dpup:h0.1,guide:b8,leftshoulder:b4,leftstick:b9,lefttrigger:a2,leftx:a0,lefty:a1,rightshoulder:b5,rightstick:b10,righttrigger:a5,rightx:a3,righty:a4,start:b7,x:b2,y:b3,
03000000de280000fc11000001000000,Steam Controller,a:b0,b:b1,back:b6,dpdown:h0.4,dpleft:h0.8,dpright:h0.2,dpup:h0.1,guide:b8,leftshoulder:b4,leftstick:b9,lefttrigger:a2,leftx:a0,lefty:a1,rightshoulder:b5,rightstick:b10,righttrigger:a5,rightx:a3,righty:a4,start:b7,x:b2,y:b3,
03000000de280000ff11000001000000,Steam Virtual Gamepad,a:b0,b:b1,back:b6,dpdown:h0.4,dpleft:h0.8,dpright:h0.2,dpup:h0.1,guide:b8,leftshoulder:b4,leftstick:b9,lefttrigger:a2,leftx:a0,lefty:a1,rightshoulder:b5,rightstick:b10,righttrigger:a5,rightx:a3,righty:a4,start:b7,x:b2,y:b3,
030000006d04000019c2000011010000,Logitech F710 Gamepad (DInput),a:b1,b:b2,back:b8,dpdown:h0.4,dpleft:h0.8,dpright:h0.2,dpup:h0.1,leftshoulder:b4,leftstick:b10,lefttrigger:b6,leftx:a0,lefty:a1,rightshoulder:b5,rightstick:b11,righttrigger:b7,rightx:a2,righty:a3,start:b9,x:b0,y:b3,
050000005e040000fd02000003090000,Xbox One Wireless Controller,a:b0,b:b1,back:b6,dpdown:h0.4,dpleft:h0.8,dpright:h0.2,dpup:h0.1,guide:b8,leftshoulder:b4,leftstick:b9,lefttrigger:a2,leftx:a0,lefty:a1,rightshoulder:b5,rightstick:b10,righttrigger:a5,rightx:a3,righty:a4,start:b7,x:b2,y:b3,"
</code></pre></div></div>


      <footer class="site-footer">
        
          <span class="site-footer-owner"><a href="http://github.com/atar-axis/xpadneo">xpadneo</a> is maintained by <a href="http://github.com/atar-axis">atar-axis</a>.</span>
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </section>

    
  </body>
</html>
